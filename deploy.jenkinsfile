// Define variable
 
 def JOB = JOB_NAME.tokenize('/') as String[]
 def JOBNAME = JOB[0]
 def S3_BUCKET = JOBNAME
 
 

pipeline {
    //agent any
    
    agent {
        label {
            label ""
            
            }
        }
    
    parameters {

        string(
            defaultValue: 'default', 
            description: '<b> Mention Client name, if want to test </b>', 
            name: 'PLACEHOLDER', 
            trim: false
            )

        string(
            defaultValue: 'default', 
            description: '<b> Mention BUILD Number, if looking for specific build. Else leave empty </b>', 
            name: 'BUILD_NUMBER', 
            trim: false
            )

        choice(
            choices: ['dev' , 'beta' , 'master'],
            description: '<b> Select Branch which you want to deploy </b>',
            name: 'BRANCH_NAME')

        choice(
            choices: ['local_onpremise' , 'beta' , 'prod'],
            description: '<b> Select Environment where you want to deploy  </b>',
            name: 'ENVIRONMENT')
        
    }


    stages {
    
        stage('Downloading WAR') {

            when {
                // Only say hello if a "greeting" is requested
                expression { params.BRANCH_NAME == 'master' }
            }
            steps {
                echo "deploying on prod"
            }

            when {
                // Only say hello if a "greeting" is requested
                expression { params.BRANCH_NAME == 'dev' }
            }
            steps {
                echo "deploying on dev"
            }

            when {
                // Only say hello if a "greeting" is requested
                expression { params.BRANCH_NAME == 'beta' }
            }
            steps {
                echo "deploying on qa"
            }

            steps {

                script {

                    sh """
                        echo "${params.PLACEHOLDER}"
                        echo "${BRANCH_NAME}"
                        echo "${ENVIRONMENT}"
                        echo "${BUILD_NUMBER}"

                    """

                }
            }
        }
        
        stage('Testing Code') {


            
            
            steps {
                echo "testing"

                }
                            
            
        }

        


    }
}
